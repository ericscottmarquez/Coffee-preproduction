/*!
 * froala_editor v2.8.5 (https://www.froala.com/wysiwyg-editor)
 * License https://froala.com/wysiwyg-editor/terms/
 * Copyright 2014-2018 Froala Labs
 */
!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=function(t,n){return n===undefined&&(n="undefined"!=typeof window?require("jquery"):require("jquery")(t)),e(n)}:e(window.jQuery)}(function(e){e.extend(e.FE.DEFAULTS,{dragInline:!0}),e.FE.PLUGINS.draggable=function(t){function n(n){return!(!n.originalEvent||!n.originalEvent.target||n.originalEvent.target.nodeType!=Node.TEXT_NODE)||(n.target&&"A"==n.target.tagName&&1==n.target.childNodes.length&&"IMG"==n.target.childNodes[0].tagName&&(n.target=n.target.childNodes[0]),e(n.target).hasClass("fr-draggable")?(t.undo.canDo()||t.undo.saveStep(),t.opts.dragInline?t.$el.attr("contenteditable",!0):t.$el.attr("contenteditable",!1),t.opts.toolbarInline&&t.toolbar.hide(),e(n.target).addClass("fr-dragging"),t.browser.msie||t.browser.edge||t.selection.clear(),void n.originalEvent.dataTransfer.setData("text","Froala")):(n.preventDefault(),!1))}function r(e){return!(e&&("HTML"==e.tagName||"BODY"==e.tagName||t.node.isElement(e)))}function a(e,n,r){t.opts.iframe&&(e+=t.$iframe.offset().top,n+=t.$iframe.offset().left),g.offset().top!=e&&g.css("top",e),g.offset().left!=n&&g.css("left",n),g.width()!=r&&g.css("width",r)}function o(n){n.originalEvent.dataTransfer.dropEffect="move",t.opts.dragInline?function(){for(var t=null,n=0;n<e.FE.INSTANCES.length;n++)if((t=e.FE.INSTANCES[n].$el.find(".fr-dragging")).length)return t.get(0)}()||!t.browser.msie&&!t.browser.edge||n.preventDefault():(n.preventDefault(),function(n){var o=t.doc.elementFromPoint(n.originalEvent.pageX-t.win.pageXOffset,n.originalEvent.pageY-t.win.pageYOffset);if(!r(o)){for(var i=0,l=o;!r(l)&&l==o&&0<n.originalEvent.pageY-t.win.pageYOffset-i;)i++,l=t.doc.elementFromPoint(n.originalEvent.pageX-t.win.pageXOffset,n.originalEvent.pageY-t.win.pageYOffset-i);(!r(l)||g&&0===t.$el.find(l).length&&l!=g.get(0))&&(l=null);for(var s=0,f=o;!r(f)&&f==o&&n.originalEvent.pageY-t.win.pageYOffset+s<e(t.doc).height();)s++,f=t.doc.elementFromPoint(n.originalEvent.pageX-t.win.pageXOffset,n.originalEvent.pageY-t.win.pageYOffset+s);(!r(f)||g&&0===t.$el.find(f).length&&f!=g.get(0))&&(f=null),o=null==f&&l?l:f&&null==l?f:f&&l?i<s?l:f:null}if(!e(o).hasClass("fr-drag-helper"))if(o&&!t.node.isBlock(o)&&(o=t.node.blockParent(o)),o&&0<=["TD","TH","TR","THEAD","TBODY"].indexOf(o.tagName)&&(o=e(o).parents("table").get(0)),o&&0<=["LI"].indexOf(o.tagName)&&(o=e(o).parents("UL, OL").get(0)),o&&!e(o).hasClass("fr-drag-helper")){var d;g||(e.FE.$draggable_helper||(e.FE.$draggable_helper=e('<div class="fr-drag-helper"></div>')),g=e.FE.$draggable_helper,t.events.on("shared.destroy",function(){g.html("").removeData().remove(),g=null},!0)),d=n.originalEvent.pageY<e(o).offset().top+e(o).outerHeight()/2;var p=e(o),v=0;d||0!==p.next().length?(d||(p=p.next()),"before"==g.data("fr-position")&&p.is(g.data("fr-tag"))||(0<p.prev().length&&(v=parseFloat(p.prev().css("margin-bottom"))||0),v=Math.max(v,parseFloat(p.css("margin-top"))||0),a(p.offset().top-v/2-t.$box.offset().top,p.offset().left-t.win.pageXOffset-t.$box.offset().left,p.width()),g.data("fr-position","before"))):"after"==g.data("fr-position")&&p.is(g.data("fr-tag"))||(v=parseFloat(p.css("margin-bottom"))||0,a(p.offset().top+e(o).height()+v/2-t.$box.offset().top,p.offset().left-t.win.pageXOffset-t.$box.offset().left,p.width()),g.data("fr-position","after")),g.data("fr-tag",p),g.addClass("fr-visible"),g.appendTo(t.$box)}else g&&0<t.$box.find(g).length&&g.removeClass("fr-visible")}(n))}function i(e){e.originalEvent.dataTransfer.dropEffect="move",t.opts.dragInline||e.preventDefault()}function l(e){t.$el.attr("contenteditable",!0);var n=t.$el.find(".fr-dragging");g&&g.hasClass("fr-visible")&&t.$box.find(g).length?s(e):n.length&&(e.preventDefault(),e.stopPropagation()),g&&t.$box.find(g).length&&g.removeClass("fr-visible"),n.removeClass("fr-dragging")}function s(n){for(var r,a,o=0;o<e.FE.INSTANCES.length;o++)if((r=e.FE.INSTANCES[o].$el.find(".fr-dragging")).length){a=e.FE.INSTANCES[o];break}if(r.length){if(n.preventDefault(),n.stopPropagation(),g&&g.hasClass("fr-visible")&&t.$box.find(g).length)g.data("fr-tag")[g.data("fr-position")]('<span class="fr-marker"></span>'),g.removeClass("fr-visible");else if(!1===t.markers.insertAtPoint(n.originalEvent))return!1;if(r.removeClass("fr-dragging"),!1===(r=t.events.chainTrigger("element.beforeDrop",r)))return!1;var i=r;if(r.parent().is("A")&&1==r.parent().get(0).childNodes.length&&(i=r.parent()),t.core.isEmpty()?t.events.focus():(t.$el.find(".fr-marker").replaceWith(e.FE.MARKERS),t.selection.restore()),a==t||t.undo.canDo()||t.undo.saveStep(),t.core.isEmpty())t.$el.html(i);else{var l=t.markers.insert();0===i.find(l).length?e(l).replaceWith(i):0===r.find(l).length&&e(l).replaceWith(r),r.after(e.FE.MARKERS),t.selection.restore()}return t.popups.hideAll(),t.selection.save(),t.$el.find(t.html.emptyBlockTagsQuery()).not("TD, TH, LI, .fr-inner").not(t.opts.htmlAllowedEmptyTags.join(",")).remove(),t.html.wrap(),t.html.fillEmptyBlocks(),t.selection.restore(),t.undo.saveStep(),t.opts.iframe&&t.size.syncIframe(),a!=t&&(a.popups.hideAll(),a.$el.find(a.html.emptyBlockTagsQuery()).not("TD, TH, LI, .fr-inner").remove(),a.html.wrap(),a.html.fillEmptyBlocks(),a.undo.saveStep(),a.events.trigger("element.dropped"),a.opts.iframe&&a.size.syncIframe()),t.events.trigger("element.dropped",[i]),!1}g&&g.removeClass("fr-visible"),t.undo.canDo()||t.undo.saveStep(),setTimeout(function(){t.undo.saveStep()},0)}function f(e){if(e&&"DIV"==e.tagName&&t.node.hasClass(e,"fr-drag-helper"))e.parentNode.removeChild(e);else if(e&&e.nodeType==Node.ELEMENT_NODE)for(var n=e.querySelectorAll("div.fr-drag-helper"),r=0;r<n.length;r++)n[r].parentNode.removeChild(n[r])}var g;return{_init:function(){t.opts.enter==e.FE.ENTER_BR&&(t.opts.dragInline=!0),t.events.on("dragstart",n,!0),t.events.on("dragover",o,!0),t.events.on("dragenter",i,!0),t.events.on("document.dragend",l,!0),t.events.on("document.drop",l,!0),t.events.on("drop",s,!0),t.events.on("html.processGet",f)}}}});